# 6.22，6.23 正则表达式

标签（空格分隔）： JavaScript从入门到放弃

---

## 1.正则表达式
>正则表达式，又称正规表示法、常规表示法。（英语：Regular Expression，在代码中常简写为regex、regexp或RE），计算机科学的一个概念。正则表达式使用单个字符串来描述、匹配一系列符合某个句法规则。在很多文本编辑器里，正则表达式通常被用来检索、替换那些符合某个模式的文本。  

## 2.正则表达式语法

###2.1 标准语法
语法：  
```
new RegExp(str,str);
```
参数：
这种写法中两个参数都是字符串，其中
第一个参数是表达式**主体内容**，第二个参数是**修饰符**  
### 2.2 简洁写法
语法：
```
/RegExp/
```
参数：
两个 `//` 之间写的是正则表达式 

## 3 正则表达式的特性：
### 3.1 懒惰
  - 完全匹配规则，不会更多的去匹配

### 3.2 贪婪
   - 只要符合匹配规则就会找出对应的字符串
  

## 4 量词

### 4.1 +
`+`  在正则表达式中出现的意思是匹配个数为从1到无限
语法：
```
/\d+\D/       //这个正则表达式的意思匹配是从是数字的第一个字符串开始，到第一个字母字符串结束
```
### 4.2 ?
`?`  在正则表达式中出现的意思是匹配个数为从0到1
最少0次，最多1次
语法：
```
/(\d)?\D+/          //匹配的时候字母前面可以有一个数字也可以没有    
```
###4.3 {n，m}
`{}`在正则表达式中规定了对应匹配的出现次数

参数：
`n`：出现的最小次数
`m`：出现的最大次数
如果n > m 那么会报错。如果为参数为负数，那么返回`null`
```
{n,}    //最小次数为n，最多不限
{0,}    //最小0次最多无限
{1,}    //相当于正则表达式中的 + ，从1到无限
{0,1}   //相当于正则表达式中的 ? ，从0到1
```

*注意：量词只适用它前面的字符,如  `a\d+` `(a\d)+`* 


## 5 特殊符号

### 5.1 |
在正则表达式中，`|`的意思是逻辑或。与JS语法中的 `||` 用法相同

### 5.2 ^
在正则表达式中，`^`如果用在`[]`中，那么意思是排除`[]`中的字符
^ 如果用在了正则表达式的开头，意思是匹配内容的头部

### 5.3 $
正则表达式中，如果$出现在表达式的结尾，意思是匹配内容的结束

### 5.4 .
正则表达式中的`.`代表了除了`\n`之外的任意字符。

### 5.5 重复子项
`\1` 重复出现第一个子项 `\2`重复出现第二个子项  以此类推
```
/(\w)\1/
```
## 6 修饰符
修饰符出现在正则表达式之外，
### 6.1 g
`g`表示全局（global）模式，即模式将被应用于所有字符串，而非在发现第一个匹配项时立即停止
语法：
```
/\d+/g
new RegExp("\\d","g");
```
### 6.2 i
`i` 表示不区分大小写（case-insensitive）模式，即在确定匹配项时忽略模式与字符串的大小写
语法：
```
new RegExp("\\D","i");
```
## 7 子项表达式
`()` 在正则表达式中，称之为子项表达式或子项
它的作用是提升优先级，而且每加一个括号就会多匹配一次。

## 8 字符范围
[] 匹配中括号任意一个字符

语法：
```
/\D[1-3]/       //匹配一个字母和一个1到3之间的数字
```
常用的字符范围：

`[0-9]`         匹配0-9之间的数字
`[A-Z]`         匹配A-Z之间的字母
`[a-z]`         匹配a-z之间的字母
`[A-Za-z]`      匹配字母，不分大小写(在字符范围符号中，不需要使用`|`)
`1[1-9]`        匹配11-19
`[\u4e00-\u9fa5]` 匹配中文字符

## 9.正则表达式的方法：
###9.1 test
作用:
用这个正则表达式去匹配参数中的字符串，如果找到符合条件的内容，那么返回 `true`，反之返回 `false`
语法：
```
RegExp.test(str);
```
参数：
需要查找的字符串

返回值：
如果找到符合条件的内容，那么返回 `true`，反之返回 `false`

### 9.2 search
作用：
类似字符串中的indexOf方法，查找字符串中符合条件的内容首次出现的位置，并返回对应字符串的下标值，如果找不到，那么返回-1。  

语法:
```
str.search( RegExp || str);
```
参数:
一个字符串 或者 一个正则表达式

返回值:
并返回**对应字符串的下标值**，如果找不到，那么返回**-1**。  
### 9.3 match
作用：
找到匹配到的数据，将数据存入数组并返回。  

语法：
```
str.match(RegExp);
```
参数：
一个正则表达式

返回值:
返回一个符合正则表达式规则的值组成的一个**数组**
如果没有找到对应的值，那么返回一个**null**  

### 9.4 replace
作用：
找到要替换的内容，然后替换

语法：
```
str.relace(str || RegExp , str || fn)
```
参数：
第一个参数可以是一个字符串或者一个正则表达式
第二个参数可以是一个字符串或者一个函数

**注意**
当第二个参数为一个函数的时候，这个函数中的第一个参数是这个正则表达是所匹配的内容（一般用`$0`）,剩下的参数依次为从正则表达式的第一个括号开始的括号中对应的匹配内容（`$1`-`$n`）

```
var str = 2016---------6--------22-----;
var a = str.replace(/(\d+)\D+(\d+)\D+(\d+)(\D+)?/, function ($0, $1, $2, $3，$4) {
	return $1 + "年"+$2 + "月"+$3 +"日"
});
上面这个正则表达式中
$0 对应的正则为 /(\d+)\D+(\d+)\D+(\d+)(\D+)?/
$1 对应的是从左侧开始第一个括号里的内容 (\d+)
$2 对应的是左侧开始第二个括号里的内容(\d+)
$3 对应的是左侧开始第三个括号里的内容(\d+)
$4 对应的是左侧开始第三个括号里的内容(\D+)?

```
如果函数中的参数多于Reg中的括号，那么多出来的 *第一个参数返回字符串中符合匹配规则的内容出现的位置* ，多出来的 *第二个参数返回整个字符串* ，剩下多余的参数都会返回`undefined`
```
var str = "dsasdas\\dsad\\dda";
var a = str.replace(/(\\d)/g,function($0,$1,$2,$3){
    console.log($2)         //返回符合匹配规则的内容出现的位置
    console.log($3)         //返回整个字符串
    console.log($4)         //undefined
    console.log($5)         //undefined
})
```
## 10 转译符 
正则表达式中的转译符：

| 字符        | 含义   | 
| :--------:   | :-----:  |
| \d        | 数字      | 
| \D        | 非数字    | 
| \n        | 换行      | 
| \\       | 转译符      | 
| \s       | 空格    | 
| \S        | 非空格      | 
| \w        | 字母、数字、下划线      | 
| \W        | 非字母、数字、下划线   | 
| \b        | 边界符   起始、结尾、空格两边     | 
| \B       | 非边界符      | 

		

